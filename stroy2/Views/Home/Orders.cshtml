@model IEnumerable<stroy2.Models.Order>
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
@using Microsoft.EntityFrameworkCore;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@


 
<div id="PlaceHolderHere"></div>

<button type="button" class="btn btn-dark" data-toggle="modal" data-target="#addOrder" data-url="@Url.Action("Create")">Добавить заказ </button>
<table class="table">

    <div id="modDialog" class="modal fade">
        <div id="dialogContent" class="modal-dialog"></div>
    </div>

    <thead>
        <tr>

            <th style="padding-right: 30vw">
                Наименование работы
            </th>
        </tr>
    </thead>
      
       

    <tbody class="tableScript" id="tableScript">
        <div data-bind='simpleGrid: gridViewModel'> </div>

        <button data-bind='click: addItem'>
            Add item
        </button>

        <button data-bind='click: sortByName'>
            Sort by name
        </button>

        <button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
            Jump to first page
        </button>
        @*
      @foreach (var item in Model)*@
      
            <tr>  
                
                <td>
                   @* @item.Work*@
                </td>
                <td>
             @*       <button type="button" class="btn  btn-light" style="">@Html.ActionLink("Изменить ", "EditOrderPartial", new { id =item.Id }, new { @class = "ord" })</button>
              
    
                    <button type="button" class="btn  btn-light" style="">@Html.ActionLink("Подробнее ", "PartialDetails", new { id =item.Id }, new { @class = "ord" })</button>
                
                    <button type="button" class="btn  btn-light" style="">@Html.ActionLink("Удалить ", "DeleteOrder", new { id =item.Id }, new { @class = "ord" })</button>
            *@    </td>
                
            </tr>

               
   



    </tbody>
    <script type="text/javascript" src="~/lib/knockout-3.5.1.js"></script>
    <script src="~/js/ScriptOrder.js"></script>
</table>


@section scripts
    {
      <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".ord").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        })

        //$(function () {
        //    $("#create_order").click(function () {
        //        debugger;

        //        let datata = {

        //            "work": $("#Work").val(),
        //            "locality": $("#Locality").val(),
        //            "volume": $("#Volume").val(),
        //            "material": $("#Material").val(),

        //        }

        //        $.ajax({
        //            type: "POST",
        //            url: "/Home/Create",
        //            data: datata,//{ "name": $("#Name").val() }, /*{ "lastname": $("#LastName").val() }, { "email": $("#Email").val() }, { "number": $("#Number").val() }, { "city": $("#City").val() }, { "letter": $("#Letter").val() },*/
        //            success: function (response) {
        //                alert("Hello: ");
        //            },
        //            failure: function (response) {
        //                alert(response.responseText);
        //            },
        //            error: function (response) {
        //                alert(response.responseText);
        //            }
        //        });
        //    });
        //});
    </script>


  
   
}